<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><TITLE>vigra - Region Segmentation Algorithms</TITLE>
<link rel=stylesheet type="text/css" href="vigra.css">
<link rel=stylesheet type="text/css" href="vigra_1_8_2.css">
<link rel="shortcut icon" href="vigra-icon.ico" />
<script type="text/javascript">
function toggleHiddenDocumentation( textID, toggleID, toggleMessage )
{ 
	if( document.getElementById(textID).style.display == 'none' )
    {
		document.getElementById(textID).style.display = 'block';
        document.getElementById(toggleID).innerHTML = "hide " + toggleMessage;
    }
    else
    {
		document.getElementById(textID).style.display = 'none';
        document.getElementById(toggleID).innerHTML = "show " + toggleMessage;
	}
    return false;
}
</script>
</head>
<body  bgcolor="#f8f0e0" link="#0040b0" vlink="#a00040">
<basefont face="Helvetica,Arial,sans-serif" size=3>
<p align=right>
[ <a href="http://hci.iwr.uni-heidelberg.de/vigra/">VIGRA Homepage</a> |
 <a href="functionindex.html">Function Index</a> |
 <a href="classes.html">Class Index</a> |
 <a href="namespaces.html">Namespaces</a> |
 <a href="files.html">File List</a> |
 <a href="index.html">Main Page</a> ]
</p>
<!-- Generated by Doxygen 1.8.3.1 -->
</div><!-- top -->
<div class="contents">
<table class="main_heading">
<tr>
<td align=left>
<A HREF ="#_details" ><IMG BORDER=0 ALT="details" title="Detailed Description" SRC="documents/pfeilGross.gif"></A>
</td>
<td width="100%">Region Segmentation Algorithms
</td>
<td align=right><a href="http://hci.iwr.uni-heidelberg.de/vigra/"><IMG border=0 ALT="VIGRA" SRC="documents/vigra.gif" title="VIGRA Homepage"></a></td></tr>
</table><p>

<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvigra_1_1SeedOptions.html">SeedOptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Options object for generateWatershedSeeds().  <a href="classvigra_1_1SeedOptions.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvigra_1_1SeedRgDirectValueFunctor.html">SeedRgDirectValueFunctor&lt; Value &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statistics functor to be used for seeded region growing.  <a href="classvigra_1_1SeedRgDirectValueFunctor.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvigra_1_1SlicOptions.html">SlicOptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Options object for <a class="el" href="group__SeededRegionGrowing.html#ga5561f1ce9b3f7a95b7de67738a0d2447" title="Compute SLIC superpixels in arbitrary dimensions.">slicSuperpixels()</a>.  <a href="structvigra_1_1SlicOptions.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvigra_1_1WatershedOptions.html">WatershedOptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Options object for watershed algorithms.  <a href="classvigra_1_1WatershedOptions.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga01b5439c31bc7008fe4b8b280dd12bf2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SeededRegionGrowing.html#ga01b5439c31bc7008fe4b8b280dd12bf2">SRGType</a> </td></tr>
<tr class="separator:ga01b5439c31bc7008fe4b8b280dd12bf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga704fac970031b32d42d5cc5ea5980751"><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr class="memitem:ga704fac970031b32d42d5cc5ea5980751"><td class="memTemplItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__SeededRegionGrowing.html#ga704fac970031b32d42d5cc5ea5980751">generateSlicSeeds</a> (...)</td></tr>
<tr class="memdesc:ga704fac970031b32d42d5cc5ea5980751"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate seeds for SLIC superpixel computation in arbitrary dimensions.  <a href="#ga704fac970031b32d42d5cc5ea5980751">More...</a><br/></td></tr>
<tr class="separator:ga704fac970031b32d42d5cc5ea5980751"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3fdf604e9584a7bdd39e4ee6bd620cbc"><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr class="memitem:ga3fdf604e9584a7bdd39e4ee6bd620cbc"><td class="memTemplItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__SeededRegionGrowing.html#ga3fdf604e9584a7bdd39e4ee6bd620cbc">generateWatershedSeeds</a> (...)</td></tr>
<tr class="memdesc:ga3fdf604e9584a7bdd39e4ee6bd620cbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate seeds for watershed computation and seeded region growing.  <a href="#ga3fdf604e9584a7bdd39e4ee6bd620cbc">More...</a><br/></td></tr>
<tr class="separator:ga3fdf604e9584a7bdd39e4ee6bd620cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b54436edf7b15b9628d17a22917b4b1"><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr class="memitem:ga7b54436edf7b15b9628d17a22917b4b1"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__SeededRegionGrowing.html#ga7b54436edf7b15b9628d17a22917b4b1">seededRegionGrowing</a> (...)</td></tr>
<tr class="memdesc:ga7b54436edf7b15b9628d17a22917b4b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Region Segmentation by means of Seeded Region Growing.  <a href="#ga7b54436edf7b15b9628d17a22917b4b1">More...</a><br/></td></tr>
<tr class="separator:ga7b54436edf7b15b9628d17a22917b4b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9e3ebc5978a393267485d426141a201"><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr class="memitem:gae9e3ebc5978a393267485d426141a201"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__SeededRegionGrowing.html#gae9e3ebc5978a393267485d426141a201">seededRegionGrowing3D</a> (...)</td></tr>
<tr class="memdesc:gae9e3ebc5978a393267485d426141a201"><td class="mdescLeft">&#160;</td><td class="mdescRight">Three-dimensional Region Segmentation by means of Seeded Region Growing.  <a href="#gae9e3ebc5978a393267485d426141a201">More...</a><br/></td></tr>
<tr class="separator:gae9e3ebc5978a393267485d426141a201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5561f1ce9b3f7a95b7de67738a0d2447"><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr class="memitem:ga5561f1ce9b3f7a95b7de67738a0d2447"><td class="memTemplItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__SeededRegionGrowing.html#ga5561f1ce9b3f7a95b7de67738a0d2447">slicSuperpixels</a> (...)</td></tr>
<tr class="memdesc:ga5561f1ce9b3f7a95b7de67738a0d2447"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute SLIC superpixels in arbitrary dimensions.  <a href="#ga5561f1ce9b3f7a95b7de67738a0d2447">More...</a><br/></td></tr>
<tr class="separator:ga5561f1ce9b3f7a95b7de67738a0d2447"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga848b9a3983f20e8ad753d104aad16810"><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr class="memitem:ga848b9a3983f20e8ad753d104aad16810"><td class="memTemplItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__SeededRegionGrowing.html#ga848b9a3983f20e8ad753d104aad16810">watersheds3D</a> (...)</td></tr>
<tr class="memdesc:ga848b9a3983f20e8ad753d104aad16810"><td class="mdescLeft">&#160;</td><td class="mdescRight">Region Segmentation by means of the watershed algorithm.  <a href="#ga848b9a3983f20e8ad753d104aad16810">More...</a><br/></td></tr>
<tr class="separator:ga848b9a3983f20e8ad753d104aad16810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67dae5f2292e59d2de0936e7aa4f3e67"><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr class="memitem:ga67dae5f2292e59d2de0936e7aa4f3e67"><td class="memTemplItemLeft" align="right" valign="top">Label&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__SeededRegionGrowing.html#ga67dae5f2292e59d2de0936e7aa4f3e67">watershedsMultiArray</a> (...)</td></tr>
<tr class="memdesc:ga67dae5f2292e59d2de0936e7aa4f3e67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Watershed segmentation of an arbitrary-dimensional array.  <a href="#ga67dae5f2292e59d2de0936e7aa4f3e67">More...</a><br/></td></tr>
<tr class="separator:ga67dae5f2292e59d2de0936e7aa4f3e67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc7ca5f4008adfaeeb33875bd378bc9d"><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr class="memitem:gadc7ca5f4008adfaeeb33875bd378bc9d"><td class="memTemplItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d">watershedsRegionGrowing</a> (...)</td></tr>
<tr class="memdesc:gadc7ca5f4008adfaeeb33875bd378bc9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Region segmentation by means of a flooding-based watershed algorithm.  <a href="#gadc7ca5f4008adfaeeb33875bd378bc9d">More...</a><br/></td></tr>
<tr class="separator:gadc7ca5f4008adfaeeb33875bd378bc9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga798e1da19d24c46a3762057b1708e8b3"><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr class="memitem:ga798e1da19d24c46a3762057b1708e8b3"><td class="memTemplItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__SeededRegionGrowing.html#ga798e1da19d24c46a3762057b1708e8b3">watershedsUnionFind</a> (...)</td></tr>
<tr class="memdesc:ga798e1da19d24c46a3762057b1708e8b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Region segmentation by means of the union-find watershed algorithm.  <a href="#ga798e1da19d24c46a3762057b1708e8b3">More...</a><br/></td></tr>
<tr class="separator:ga798e1da19d24c46a3762057b1708e8b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="_details" id="details"></a><h2 class="details_section">Detailed Description</h2>
<p>Region growing, watersheds, and voronoi tesselation </p>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga01b5439c31bc7008fe4b8b280dd12bf2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum SRGType</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Choose between different types of Region Growing </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga67dae5f2292e59d2de0936e7aa4f3e67"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Label vigra::watershedsMultiArray </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Watershed segmentation of an arbitrary-dimensional array. </p>
<p>This function implements variants of the watershed algorithms described in</p>
<p>[1] L. Vincent and P. Soille: <em>"Watersheds in digital spaces: An efficient algorithm
based on immersion simulations"</em>, IEEE Trans. Patt. Analysis Mach. Intell. 13(6):583-598, 1991</p>
<p>[2] J. Roerdink, R. Meijster: <em>"The watershed transform: definitions, algorithms,
and parallelization strategies"</em>, Fundamenta Informaticae, 41:187-228, 2000</p>
<p>The source array <em>data</em> is a boundary indicator such as the <a class="el" href="group__CommonConvolutionFilters.html#gab80e356fa487f97d718ed815a3cf4855" title="Calculate the gradient magnitude by means of a 1st derivatives of Gaussian filter.">gaussianGradientMagnitude()</a> or the trace of the <a class="el" href="group__TensorImaging.html#gab4ee0f19130a109119cc9cbc594ed1b7">boundaryTensor()</a>, and the destination <em>labels</em> is a label array designating membership of each point in one of the regions found. Plateaus in the boundary indicator are handled via simple tie breaking strategies. Argument <em>neighborhood</em> specifies the connectivity between points and can be <code>DirectNeighborhood</code> (meaning 4-neighborhood in 2D and 6-neighborhood in 3D, default) or <code>IndirectNeighborhood</code> (meaning 8-neighborhood in 2D and 26-neighborhood in 3D).</p>
<p>The watershed variant to be applied can be selected in the <a class="el" href="classvigra_1_1WatershedOptions.html">WatershedOptions</a> object: When you call <code><a class="el" href="classvigra_1_1WatershedOptions.html#ad08e96e7593dbb405041976f5d64ca5d" title="Use region-growing watershed.">WatershedOptions::regionGrowing()</a></code> (default), the flooding algorithm from [1] is used. Alternatively, <code><a class="el" href="classvigra_1_1WatershedOptions.html#acbe3e1d95098e09c53f8948f5fdef55f" title="Use union-find watershed.">WatershedOptions::unionFind()</a></code> uses the scan-line algorithm 4.7 from [2]. The latter is faster, but does not support any options (if you pass options nonetheless, they are silently ignored).</p>
<p>The region growing algorithm needs a seed for each region. Seeds can either be provided in the destination array <em>labels</em> (which will then be overwritten with the result) or computed automatically by an internal call to generateWatershedSeeds(). In the former case you have full control over seed placement, while the latter is more convenient. Automatic seed computation is performed when you provide seeding options via <code><a class="el" href="classvigra_1_1WatershedOptions.html#a15555597c38612854638c1fc2482a027" title="Specify seed options.">WatershedOptions::seedOptions()</a></code> or when the array <em>labels</em> is empty (all zeros), in which case default seeding options are chosen. The destination image should be zero-initialized for automatic seed computation.</p>
<p>Further options to be specified via <a class="el" href="classvigra_1_1WatershedOptions.html">WatershedOptions</a> are:</p>
<ul>
<li>
<code>keepContours()</code>: Whether to keep a 1-pixel-wide contour (with label 0) between regions (otherwise, a complete grow is performed, i.e. all pixels are assigned to a region). </li>
<li>
<code>stopAtThreshold()</code>: Whether to stop growing when the boundaryness exceeds a threshold (remaining pixels keep label 0). </li>
<li>
<code>biasLabel()</code>: Whether one region (label) is to be preferred or discouraged by biasing its cost with a given factor (smaller than 1 for preference, larger than 1 for discouragement). </li>
</ul>
<p>The option <code>turboAlgorithm()</code> is implied by method <code>regionGrowing()</code> (this is in contrast to <a class="el" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing()</a>, which supports an additional algorithm in 2D only).</p>
<p><a class="el" href="group__SeededRegionGrowing.html#ga67dae5f2292e59d2de0936e7aa4f3e67" title="Watershed segmentation of an arbitrary-dimensional array.">watershedsMultiArray()</a> returns the number of regions found (= the highest region label, because labels start at 1).</p>
<p><b> Declaration:</b></p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> N, <span class="keyword">class </span>T, <span class="keyword">class </span>S1,</div>
<div class="line">                              <span class="keyword">class </span>Label, <span class="keyword">class </span>S2&gt;</div>
<div class="line">    Label</div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#ga67dae5f2292e59d2de0936e7aa4f3e67" title="Watershed segmentation of an arbitrary-dimensional array.">watershedsMultiArray</a>(MultiArrayView&lt;N, T, S1&gt; <span class="keyword">const</span> &amp; data,</div>
<div class="line">                         MultiArrayView&lt;N, Label, S2&gt; labels,  <span class="comment">// may also hold input seeds</span></div>
<div class="line">                         <a class="code" href="group__MultiIteratorGroup.html#ga9d75de3edc093f215c3f4d42a966167a" title="Choose the neighborhood system in a dimension-independent way.">NeighborhoodType</a> neighborhood = <a class="code" href="group__MultiIteratorGroup.html#gga9d75de3edc093f215c3f4d42a966167aaf5b533c53c0491107c6c9b890b635372" title="use only direct neighbors">DirectNeighborhood</a>,</div>
<div class="line">                         WatershedOptions <span class="keyword">const</span> &amp; options = WatershedOptions());</div>
<div class="line">}</div>
</div><!-- fragment --><p><b> Usage:</b></p>
<p><b>#include</b> &lt;<a class="el" href="multi__watersheds_8hxx_source.html">vigra/multi_watersheds.hxx</a>&gt;<br/>
 Namespace: vigra</p>
<p>Example: watersheds of the gradient magnitude (the example works likewise for higher dimensions).</p>
<div class="fragment"><div class="line">MultiArray&lt;2, unsigned char&gt; src(<a class="code" href="group__MultiIteratorGroup.html#ga2e2ffc107bb0e38f9b1288b647c8ec5b" title="shape type for MultiArray&lt;2, T&gt;">Shape2</a>(w, h));</div>
<div class="line">... <span class="comment">// read input data</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// compute gradient magnitude at scale 1.0 as a boundary indicator</span></div>
<div class="line">MultiArray&lt;2, float&gt; gradMag(src.shape());</div>
<div class="line"><a class="code" href="group__CommonConvolutionFilters.html#gab80e356fa487f97d718ed815a3cf4855" title="Calculate the gradient magnitude by means of a 1st derivatives of Gaussian filter.">gaussianGradientMagnitude</a>(srcImageRange(src), destImage(gradMag), 1.0);</div>
<div class="line"></div>
<div class="line"><span class="comment">// example 1</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// the pixel type of the destination image must be large enough to hold</span></div>
<div class="line">    <span class="comment">// numbers up to &#39;max_region_label&#39; to prevent overflow</span></div>
<div class="line">    MultiArray&lt;2, unsigned int&gt; labeling(src.shape());</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// call region-growing algorithm for 4-neighborhood, leave a 1-pixel boundary between </span></div>
<div class="line">    <span class="comment">// regions, and autogenerate seeds from all gradient minima where the magnitude is </span></div>
<div class="line">    <span class="comment">// less than 2.0.</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_region_label = </div>
<div class="line">          <a class="code" href="group__SeededRegionGrowing.html#ga67dae5f2292e59d2de0936e7aa4f3e67" title="Watershed segmentation of an arbitrary-dimensional array.">watershedsMultiArray</a>(gradMag, labeling, <a class="code" href="group__MultiIteratorGroup.html#gga9d75de3edc093f215c3f4d42a966167aaf5b533c53c0491107c6c9b890b635372" title="use only direct neighbors">DirectNeighborhood</a>,</div>
<div class="line">                               WatershedOptions().keepContours()</div>
<div class="line">                                  .seedOptions(SeedOptions().minima().threshold(2.0)));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// example 2</span></div>
<div class="line">{</div>
<div class="line">    MultiArray&lt;2, unsigned int&gt; labeling(src.shape());</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// compute seeds beforehand (use connected components of all pixels </span></div>
<div class="line">    <span class="comment">// where the gradient is below 4.0)</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_region_label = generateWatershedSeeds(gradMag, labeling,</div>
<div class="line">                                                   SeedOptions().levelSets(4.0));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// quantize the gradient image to 256 gray levels</span></div>
<div class="line">    <span class="keywordtype">float</span> m, M;</div>
<div class="line">    gradMag.minmax(&amp;m, &amp;M);</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">using namespace </span>multi_math;</div>
<div class="line">    MultiArray&lt;2, unsigned char&gt; gradMag256(255.0 / (M - m) * (gradMag - m));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// call region-growing algorithm with 8-neighborhood,</span></div>
<div class="line">    <span class="comment">// since the data are 8-bit, a faster priority queue will be used</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#ga67dae5f2292e59d2de0936e7aa4f3e67" title="Watershed segmentation of an arbitrary-dimensional array.">watershedsMultiArray</a>(gradMag256, labeling, <a class="code" href="group__MultiIteratorGroup.html#gga9d75de3edc093f215c3f4d42a966167aabee0bb96274e332d294c1aa2893f6cac" title="use direct and indirect neighbors">IndirectNeighborhood</a>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// example 3</span></div>
<div class="line">{</div>
<div class="line">    MultiArray&lt;2, unsigned int&gt; labeling(src.shape());</div>
<div class="line">    </div>
<div class="line">    .. <span class="comment">// put seeds in &#39;labeling&#39;, e.g. from an interactive labeling program,</span></div>
<div class="line">       <span class="comment">// make sure that label 1 corresponds to the background</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// bias the watershed algorithm so that the background is preferred</span></div>
<div class="line">    <span class="comment">// by reducing the cost for label 1 to 90%</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#ga67dae5f2292e59d2de0936e7aa4f3e67" title="Watershed segmentation of an arbitrary-dimensional array.">watershedsMultiArray</a>(gradMag, labeling, </div>
<div class="line">                         WatershedOptions().biasLabel(1, 0.9));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// example 4</span></div>
<div class="line">{</div>
<div class="line">    MultiArray&lt;2, unsigned int&gt; labeling(src.shape());</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// use the fast union-find algorithm with 4-neighborhood</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#ga67dae5f2292e59d2de0936e7aa4f3e67" title="Watershed segmentation of an arbitrary-dimensional array.">watershedsMultiArray</a>(gradMag, labeling, WatershedOptions().unionFind());</div>
<div class="line">}</div>
</div><!-- fragment --> <dl><dt><b>Examples: </b></dt><dd><a class="el" href="watershed_8cxx-example.html#a2">watershed.cxx</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga7b54436edf7b15b9628d17a22917b4b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vigra::seededRegionGrowing </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Region Segmentation by means of Seeded Region Growing. </p>
<p>This algorithm implements seeded region growing as described in</p>
<p>R. Adams, L. Bischof: <em>"Seeded Region Growing"</em>, IEEE Trans. on Pattern Analysis and Maschine Intelligence, vol 16, no 6, 1994, and</p>
<p>Ullrich K&ouml;the: <em><a href="http://hci.iwr.uni-heidelberg.de/people/ukoethe/papers/index.php#cite_primary_segmentation">Primary Image Segmentation</a></em>, in: G. Sagerer, S. Posch, F. Kummert (eds.): Mustererkennung 1995, Proc. 17. DAGM-Symposium, Springer 1995</p>
<p>The seed image is a partly segmented image which contains uniquely labeled regions (the seeds) and unlabeled pixels (the candidates, label 0). The highest seed label found in the seed image is returned by the algorithm.</p>
<p>Seed regions can be as large as you wish and as small as one pixel. If there are no candidates, the algorithm will simply copy the seed image into the output image. Otherwise it will aggregate the candidates into the existing regions so that a cost function is minimized. Candidates are taken from the neighborhood of the already assigned pixels, where the type of neighborhood is determined by parameter <code>neighborhood</code> which can take the values <code><a class="el" href="group__PixelNeighborhood.html#ga58cb45fb133eb7c1d63fd14f65b8320f">FourNeighborCode()</a></code> (the default) or <code><a class="el" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode()</a></code>. The algorithm basically works as follows (illustrated for 4-neighborhood, but 8-neighborhood works in the same way):</p>
<ol>
<li>
<p class="startli">Find all candidate pixels that are 4-adjacent to a seed region. Calculate the cost for aggregating each candidate into its adjacent region and put the candidates into a priority queue.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">While( priority queue is not empty and termination criterion is not fulfilled)</p>
<ol>
<li>
<p class="startli">Take the candidate with least cost from the queue. If it has not already been merged, merge it with it's adjacent region.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Put all candidates that are 4-adjacent to the pixel just processed into the priority queue.</p>
<p class="endli"></p>
</li>
</ol>
<p class="endli"></p>
</li>
</ol>
<p><code>SRGType</code> can take the following values:</p>
<dl>
<dt><code>CompleteGrow</code> </dt>
<dd>produce a complete tesselation of the volume (default). </dd>
<dt><code>KeepContours</code> </dt>
<dd>keep a 1-voxel wide unlabeled contour between all regions. </dd>
<dt><code>StopAtThreshold</code> </dt>
<dd>stop when the boundary indicator values exceed the threshold given by parameter <code>max_cost</code>. </dd>
<dt><code>KeepContours | StopAtThreshold</code> </dt>
<dd>keep 1-voxel wide contour and stop at given <code>max_cost</code>. </dd>
</dl>
<p>The cost is determined jointly by the source image and the region statistics functor. The source image contains feature values for each pixel which will be used by the region statistics functor to calculate and update statistics for each region and to calculate the cost for each candidate. The <code>RegionStatisticsArray</code> must be compatible to the <a class="el" href="classvigra_1_1ArrayOfRegionStatistics.html">ArrayOfRegionStatistics</a> functor and contains an <em> array</em> of statistics objects for each region. The indices must correspond to the labels of the seed regions. The statistics for the initial regions must have been calculated prior to calling <code><a class="el" href="group__SeededRegionGrowing.html#ga7b54436edf7b15b9628d17a22917b4b1" title="Region Segmentation by means of Seeded Region Growing.">seededRegionGrowing()</a></code> (for example by means of <a class="el" href="group__InspectAlgo.html#gade5a57c06d2ab13ddf4522c931d9e757">inspectTwoImagesIf()</a>).</p>
<p>For each candidate <code>x</code> that is adjacent to region <code>i</code>, the algorithm will call <code>stats[i].cost(as(x))</code> to get the cost (where <code>x</code> is a <code>SrcIterator</code> and <code>as</code> is the SrcAccessor). When a candidate has been merged with a region, the statistics are updated by calling <code>stats[i].operator()(as(x))</code>. Since the <code>RegionStatisticsArray</code> is passed by reference, this will overwrite the original statistics.</p>
<p>If a candidate could be merged into more than one regions with identical cost, the algorithm will favour the nearest region. If <code>StopAtThreshold</code> is active, and the cost of the current candidate at any point in the algorithm exceeds the optional <code>max_cost</code> value (which defaults to <code>NumericTraits&lt;double&gt;::max()</code>), region growing is aborted, and all voxels not yet assigned to a region remain unlabeled.</p>
<p>In some cases, the cost only depends on the feature value of the current pixel. Then the update operation will simply be a no-op, and the <code>cost()</code> function returns its argument. This behavior is implemented by the <a class="el" href="classvigra_1_1SeedRgDirectValueFunctor.html">SeedRgDirectValueFunctor</a>. With <code>SRGType == KeepContours</code>, this is equivalent to the watershed algorithm.</p>
<p><b> Declarations:</b></p>
<p>pass 2D array views: </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>T1, <span class="keyword">class </span>S1,</div>
<div class="line">              <span class="keyword">class </span>TS, <span class="keyword">class </span>AS,</div>
<div class="line">              <span class="keyword">class </span>T2, <span class="keyword">class </span>S2,</div>
<div class="line">              <span class="keyword">class </span>RegionStatisticsArray, <span class="keyword">class </span>Neighborhood&gt;</div>
<div class="line">    TS</div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#ga7b54436edf7b15b9628d17a22917b4b1" title="Region Segmentation by means of Seeded Region Growing.">seededRegionGrowing</a>(MultiArrayView&lt;2, T1, S1&gt; <span class="keyword">const</span> &amp; src,</div>
<div class="line">                        MultiArrayView&lt;2, TS, AS&gt; <span class="keyword">const</span> &amp; seeds,</div>
<div class="line">                        MultiArrayView&lt;2, T2, S2&gt;         labels,</div>
<div class="line">                        RegionStatisticsArray &amp;           stats,</div>
<div class="line">                        <a class="code" href="group__SeededRegionGrowing.html#ga01b5439c31bc7008fe4b8b280dd12bf2">SRGType</a>                           srgType = CompleteGrow, </div>
<div class="line">                        Neighborhood                      n = <a class="code" href="group__PixelNeighborhood.html#ga58cb45fb133eb7c1d63fd14f65b8320f">FourNeighborCode</a>(),</div>
<div class="line">                        <span class="keywordtype">double</span>                            max_cost = NumericTraits&lt;double&gt;::max());</div>
<div class="line">}</div>
</div><!-- fragment --><p><a href="#" id="seededRegionGrowing_OldAPIToggle" onclick="return toggleHiddenDocumentation(&apos;seededRegionGrowing_OldAPI&apos;, &apos;seededRegionGrowing_OldAPIToggle&apos;, &apos;deprecated declarations&apos;);">show deprecated declarations</a></p>
<div id="seededRegionGrowing_OldAPI" style="display:none"> pass <a class="el" href="group__ImageIterators.html">Image Iterators</a> and <a class="el" href="group__DataAccessors.html">Data Accessors</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>SeedImageIterator, <span class="keyword">class </span>SeedAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>RegionStatisticsArray, <span class="keyword">class </span>Neighborhood&gt;</div>
<div class="line">    <span class="keyword">typename</span> SeedAccessor::value_type </div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#ga7b54436edf7b15b9628d17a22917b4b1" title="Region Segmentation by means of Seeded Region Growing.">seededRegionGrowing</a>(SrcIterator srcul, SrcIterator srclr, SrcAccessor as,</div>
<div class="line">                        SeedImageIterator seedsul, SeedAccessor aseeds,</div>
<div class="line">                        DestIterator destul, DestAccessor ad,</div>
<div class="line">                        RegionStatisticsArray &amp; stats,</div>
<div class="line">                        <a class="code" href="group__SeededRegionGrowing.html#ga01b5439c31bc7008fe4b8b280dd12bf2">SRGType</a> srgType = CompleteGrow,</div>
<div class="line">                        Neighborhood neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga58cb45fb133eb7c1d63fd14f65b8320f">FourNeighborCode</a>(),</div>
<div class="line">                        <span class="keywordtype">double</span> max_cost = NumericTraits&lt;double&gt;::max());</div>
<div class="line">}</div>
</div><!-- fragment --><p> use argument objects in conjunction with <a class="el" href="ArgumentObjectFactories.html">Argument Object Factories</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>SeedImageIterator, <span class="keyword">class </span>SeedAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>RegionStatisticsArray, <span class="keyword">class </span>Neighborhood&gt;</div>
<div class="line">    <span class="keyword">typename</span> SeedAccessor::value_type</div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#ga7b54436edf7b15b9628d17a22917b4b1" title="Region Segmentation by means of Seeded Region Growing.">seededRegionGrowing</a>(triple&lt;SrcIterator, SrcIterator, SrcAccessor&gt; src,</div>
<div class="line">                        pair&lt;SeedImageIterator, SeedAccessor&gt; seeds,</div>
<div class="line">                        pair&lt;DestIterator, DestAccessor&gt; dest,</div>
<div class="line">                        RegionStatisticsArray &amp; stats,</div>
<div class="line">                        <a class="code" href="group__SeededRegionGrowing.html#ga01b5439c31bc7008fe4b8b280dd12bf2">SRGType</a> srgType = CompleteGrow,</div>
<div class="line">                        Neighborhood neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga58cb45fb133eb7c1d63fd14f65b8320f">FourNeighborCode</a>(),</div>
<div class="line">                        <span class="keywordtype">double</span> max_cost = NumericTraits&lt;double&gt;::max());</div>
<div class="line">}</div>
</div><!-- fragment --> </div><p><b> Usage:</b></p>
<p><b>#include</b> &lt;<a class="el" href="seededregiongrowing_8hxx_source.html">vigra/seededregiongrowing.hxx</a>&gt;<br/>
 Namespace: vigra</p>
<p>Example: implementation of the voronoi tesselation</p>
<div class="fragment"><div class="line">MultiArray&lt;2, int&gt;      points(w,h);</div>
<div class="line">MultiArray&lt;2, float&gt;    dist(x,y);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> max_region_label = 100;</div>
<div class="line"></div>
<div class="line"><span class="comment">// throw in some random points:</span></div>
<div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt;= max_region_label; ++i)</div>
<div class="line">       points(w * rand() / RAND_MAX , h * rand() / RAND_MAX) = i;</div>
<div class="line"></div>
<div class="line"><span class="comment">// calculate Euclidean distance transform</span></div>
<div class="line"><a class="code" href="group__DistanceTransform.html#gad481d272471bfa808196959dffca524b">distanceTransform</a>(points, dist, 2);</div>
<div class="line"></div>
<div class="line"><span class="comment">// init statistics functor</span></div>
<div class="line">ArrayOfRegionStatistics&lt;SeedRgDirectValueFunctor&lt;float&gt; &gt;  stats(max_region_label);</div>
<div class="line"></div>
<div class="line"><span class="comment">// find voronoi region of each point (the point image is overwritten with the </span></div>
<div class="line"><span class="comment">// voronoi region labels)</span></div>
<div class="line"><a class="code" href="group__SeededRegionGrowing.html#ga7b54436edf7b15b9628d17a22917b4b1" title="Region Segmentation by means of Seeded Region Growing.">seededRegionGrowing</a>(dist, points, points, stats);</div>
</div><!-- fragment --><p><a href="#" id="seededRegionGrowing_OldUsageToggle" onclick="return toggleHiddenDocumentation(&apos;seededRegionGrowing_OldUsage&apos;, &apos;seededRegionGrowing_OldUsageToggle&apos;, &apos;deprecated examples&apos;);">show deprecated examples</a></p>
<div id="seededRegionGrowing_OldUsage" style="display:none"> <div class="fragment"><div class="line"><a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::BImage</a> points(w,h);</div>
<div class="line"><a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::FImage</a> dist(x,y);</div>
<div class="line"></div>
<div class="line"><span class="comment">// empty edge image</span></div>
<div class="line">points = 0;</div>
<div class="line">dist = 0;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> max_region_label = 100;</div>
<div class="line"></div>
<div class="line"><span class="comment">// throw in some random points:</span></div>
<div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt;= max_region_label; ++i)</div>
<div class="line">       points(w * rand() / RAND_MAX , h * rand() / RAND_MAX) = i;</div>
<div class="line"></div>
<div class="line"><span class="comment">// calculate Euclidean distance transform</span></div>
<div class="line"><a class="code" href="group__DistanceTransform.html#gad481d272471bfa808196959dffca524b">vigra::distanceTransform</a>(srcImageRange(points), destImage(dist), 2);</div>
<div class="line"></div>
<div class="line"><span class="comment">// init statistics functor</span></div>
<div class="line"><a class="code" href="classvigra_1_1ArrayOfRegionStatistics.html" title="Calculate statistics for all regions of a labeled image.">vigra::ArrayOfRegionStatistics&lt;vigra::SeedRgDirectValueFunctor&lt;float&gt;</a> &gt;</div>
<div class="line">                                          stats(max_region_label);</div>
<div class="line"></div>
<div class="line"><span class="comment">// find voronoi region of each point</span></div>
<div class="line"><a class="code" href="group__SeededRegionGrowing.html#ga7b54436edf7b15b9628d17a22917b4b1" title="Region Segmentation by means of Seeded Region Growing.">vigra:: seededRegionGrowing</a>(srcImageRange(dist), srcImage(points),</div>
<div class="line">                           destImage(points), stats);</div>
</div><!-- fragment --><p> <b> Required Interface:</b> </p>
<div class="fragment"><div class="line">SrcIterator src_upperleft, src_lowerright;</div>
<div class="line">SeedImageIterator seed_upperleft;</div>
<div class="line">DestIterator dest_upperleft;</div>
<div class="line"></div>
<div class="line">SrcAccessor src_accessor;</div>
<div class="line">SeedAccessor seed_accessor;</div>
<div class="line">DestAccessor dest_accessor;</div>
<div class="line"></div>
<div class="line">RegionStatisticsArray stats;</div>
<div class="line"></div>
<div class="line"><span class="comment">// calculate costs</span></div>
<div class="line">RegionStatisticsArray::value_type::cost_type cost =</div>
<div class="line">    stats[seed_accessor(seed_upperleft)].cost(src_accessor(src_upperleft));</div>
<div class="line"></div>
<div class="line"><span class="comment">// compare costs</span></div>
<div class="line">cost &lt; cost;</div>
<div class="line"></div>
<div class="line"><span class="comment">// update statistics</span></div>
<div class="line">stats[seed_accessor(seed_upperleft)](src_accessor(src_upperleft));</div>
<div class="line"></div>
<div class="line"><span class="comment">// set result</span></div>
<div class="line">dest_accessor.set(seed_accessor(seed_upperleft), dest_upperleft);</div>
</div><!-- fragment --> </div><p>Further requirements are determined by the <code>RegionStatisticsArray</code>. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="voronoi_8cxx-example.html#a9">voronoi.cxx</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gae9e3ebc5978a393267485d426141a201"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vigra::seededRegionGrowing3D </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Three-dimensional Region Segmentation by means of Seeded Region Growing. </p>
<p>This algorithm implements seeded region growing as described in</p>
<p>The seed image is a partly segmented multi-dimensional array which contains uniquely labeled regions (the seeds) and unlabeled voxels (the candidates, label 0). Seed regions can be as large as you wish and as small as one voxel. If there are no candidates, the algorithm will simply copy the seed array into the output array. Otherwise it will aggregate the candidates into the existing regions so that a cost function is minimized. Candidates are taken from the neighborhood of the already assigned pixels, where the type of neighborhood is determined by parameter <code>neighborhood</code> which can take the values <code><a class="el" href="group__VoxelNeighborhood.html#gaae23891fb489f969e6deff00b8d76b8a">NeighborCode3DSix()</a></code> (the default) or <code><a class="el" href="group__VoxelNeighborhood.html#ga89b6c2a18b23d145b3bc2fe983803f08">NeighborCode3DTwentySix()</a></code>. The algorithm basically works as follows (illustrated for 6-neighborhood, but 26-neighborhood works in the same way):</p>
<ol>
<li>
<p class="startli">Find all candidate pixels that are 6-adjacent to a seed region. Calculate the cost for aggregating each candidate into its adjacent region and put the candidates into a priority queue.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">While( priority queue is not empty)</p>
<ol>
<li>
<p class="startli">Take the candidate with least cost from the queue. If it has not already been merged, merge it with it's adjacent region.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Put all candidates that are 4-adjacent to the pixel just processed into the priority queue.</p>
<p class="endli"></p>
</li>
</ol>
<p class="endli"></p>
</li>
</ol>
<p><code>SRGType</code> can take the following values:</p>
<dl>
<dt><code>CompleteGrow</code> </dt>
<dd>produce a complete tesselation of the volume (default). </dd>
<dt><code>KeepContours</code> </dt>
<dd>keep a 1-voxel wide unlabeled contour between all regions. </dd>
<dt><code>StopAtThreshold</code> </dt>
<dd>stop when the boundary indicator values exceed the threshold given by parameter <code>max_cost</code>. </dd>
<dt><code>KeepContours | StopAtThreshold</code> </dt>
<dd>keep 1-voxel wide contour and stop at given <code>max_cost</code>. </dd>
</dl>
<p>The cost is determined jointly by the source array and the region statistics functor. The source array contains feature values for each pixel which will be used by the region statistics functor to calculate and update statistics for each region and to calculate the cost for each candidate. The <code>RegionStatisticsArray</code> must be compatible to the <a class="el" href="classvigra_1_1ArrayOfRegionStatistics.html">ArrayOfRegionStatistics</a> functor and contains an <em> array</em> of statistics objects for each region. The indices must correspond to the labels of the seed regions. The statistics for the initial regions must have been calculated prior to calling <code><a class="el" href="group__SeededRegionGrowing.html#gae9e3ebc5978a393267485d426141a201" title="Three-dimensional Region Segmentation by means of Seeded Region Growing.">seededRegionGrowing3D()</a></code></p>
<p>For each candidate <code>x</code> that is adjacent to region <code>i</code>, the algorithm will call <code>stats[i].cost(as(x))</code> to get the cost (where <code>x</code> is a <code>SrcImageIterator</code> and <code>as</code> is the SrcAccessor). When a candidate has been merged with a region, the statistics are updated by calling <code>stats[i].operator()(as(x))</code>. Since the <code>RegionStatisticsArray</code> is passed by reference, this will overwrite the original statistics.</p>
<p>If a candidate could be merged into more than one regions with identical cost, the algorithm will favour the nearest region. If <code>StopAtThreshold</code> is active, and the cost of the current candidate at any point in the algorithm exceeds the optional <code>max_cost</code> value (which defaults to <code>NumericTraits&lt;double&gt;::max()</code>), region growing is aborted, and all voxels not yet assigned to a region remain unlabeled.</p>
<p>In some cases, the cost only depends on the feature value of the current voxel. Then the update operation will simply be a no-op, and the <code>cost()</code> function returns its argument. This behavior is implemented by the <a class="el" href="classvigra_1_1SeedRgDirectValueFunctor.html">SeedRgDirectValueFunctor</a>.</p>
<p><b> Declarations:</b></p>
<p>pass 3D array views: </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>T1, <span class="keyword">class </span>S1,</div>
<div class="line">              <span class="keyword">class </span>TS, <span class="keyword">class </span>AS,</div>
<div class="line">              <span class="keyword">class </span>T2, <span class="keyword">class </span>S2,</div>
<div class="line">              <span class="keyword">class </span>RegionStatisticsArray, <span class="keyword">class </span>Neighborhood&gt;</div>
<div class="line">    <span class="keywordtype">void</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gae9e3ebc5978a393267485d426141a201" title="Three-dimensional Region Segmentation by means of Seeded Region Growing.">seededRegionGrowing3D</a>(MultiArrayView&lt;3, T1, S1&gt; <span class="keyword">const</span> &amp; src,</div>
<div class="line">                          MultiArrayView&lt;3, TS, AS&gt; <span class="keyword">const</span> &amp; seeds,</div>
<div class="line">                          MultiArrayView&lt;3, T2, S2&gt;         labels,</div>
<div class="line">                          RegionStatisticsArray &amp;           stats, </div>
<div class="line">                          <a class="code" href="group__SeededRegionGrowing.html#ga01b5439c31bc7008fe4b8b280dd12bf2">SRGType</a>                           srgType = CompleteGrow,</div>
<div class="line">                          Neighborhood                      neighborhood = <a class="code" href="group__VoxelNeighborhood.html#gaae23891fb489f969e6deff00b8d76b8a">NeighborCode3DSix</a>(),</div>
<div class="line">                          <span class="keywordtype">double</span>                            max_cost = NumericTraits&lt;double&gt;::max());</div>
<div class="line">}</div>
</div><!-- fragment --><p><a href="#" id="seededRegionGrowing3D_OldAPIToggle" onclick="return toggleHiddenDocumentation(&apos;seededRegionGrowing3D_OldAPI&apos;, &apos;seededRegionGrowing3D_OldAPIToggle&apos;, &apos;deprecated declarations&apos;);">show deprecated declarations</a></p>
<div id="seededRegionGrowing3D_OldAPI" style="display:none"> pass <a class="el" href="MultiIteratorPage.html">MultiIterators</a> and <a class="el" href="group__DataAccessors.html">Data Accessors</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcImageIterator, <span class="keyword">class </span>Shape, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>SeedImageIterator, <span class="keyword">class </span>SeedAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestImageIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>RegionStatisticsArray, <span class="keyword">class </span>Neighborhood&gt;</div>
<div class="line">    <span class="keywordtype">void</span> </div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gae9e3ebc5978a393267485d426141a201" title="Three-dimensional Region Segmentation by means of Seeded Region Growing.">seededRegionGrowing3D</a>(SrcImageIterator srcul, Shape shape, SrcAccessor as,</div>
<div class="line">                          SeedImageIterator seedsul, SeedAccessor aseeds,</div>
<div class="line">                          DestImageIterator destul, DestAccessor ad,</div>
<div class="line">                          RegionStatisticsArray &amp; stats, </div>
<div class="line">                          <a class="code" href="group__SeededRegionGrowing.html#ga01b5439c31bc7008fe4b8b280dd12bf2">SRGType</a> srgType = CompleteGrow,</div>
<div class="line">                          Neighborhood neighborhood = <a class="code" href="group__VoxelNeighborhood.html#gaae23891fb489f969e6deff00b8d76b8a">NeighborCode3DSix</a>(),</div>
<div class="line">                          <span class="keywordtype">double</span> max_cost = NumericTraits&lt;double&gt;::max());</div>
<div class="line">}</div>
</div><!-- fragment --><p> use argument objects in conjunction with <a class="el" href="ArgumentObjectFactories.html">Argument Object Factories</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcImageIterator, <span class="keyword">class </span>Shape, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>SeedImageIterator, <span class="keyword">class </span>SeedAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestImageIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>RegionStatisticsArray, <span class="keyword">class </span>Neighborhood&gt;</div>
<div class="line">    <span class="keywordtype">void</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gae9e3ebc5978a393267485d426141a201" title="Three-dimensional Region Segmentation by means of Seeded Region Growing.">seededRegionGrowing3D</a>(triple&lt;SrcImageIterator, Shape, SrcAccessor&gt; src,</div>
<div class="line">                          pair&lt;SeedImageIterator, SeedAccessor&gt; seeds,</div>
<div class="line">                          pair&lt;DestImageIterator, DestAccessor&gt; dest,</div>
<div class="line">                          RegionStatisticsArray &amp; stats, </div>
<div class="line">                          <a class="code" href="group__SeededRegionGrowing.html#ga01b5439c31bc7008fe4b8b280dd12bf2">SRGType</a> srgType = CompleteGrow,</div>
<div class="line">                          Neighborhood neighborhood = <a class="code" href="group__VoxelNeighborhood.html#gaae23891fb489f969e6deff00b8d76b8a">NeighborCode3DSix</a>(), </div>
<div class="line">                          <span class="keywordtype">double</span> max_cost = NumericTraits&lt;double&gt;::max());</div>
<div class="line">}</div>
</div><!-- fragment --> </div><p><b> Usage:</b></p>
<p><b>#include</b> &lt;<a class="el" href="seededregiongrowing3d_8hxx_source.html">vigra/seededregiongrowing3d.hxx</a>&gt;<br/>
 Namespace: vigra</p>
<p>See <a class="el" href="group__SeededRegionGrowing.html#ga7b54436edf7b15b9628d17a22917b4b1">seededRegionGrowing()</a> for an example </p>

</div>
</div>
<a class="anchor" id="ga704fac970031b32d42d5cc5ea5980751"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int vigra::generateSlicSeeds </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate seeds for SLIC superpixel computation in arbitrary dimensions. </p>
<p>The source array <em>src</em> must be a scalar boundary indicator such as the gradient magnitude. Seeds are initially placed on a regular Cartesian grid with spacing <em>seedDist</em> und then moved to the point with smallest boundary indicator within a search region of radius <em>searchRadius</em> around the initial position. The resulting points are then marked in the output array <em>seeds</em> by consecutive labels.</p>
<p>The function returns the number of selected seeds, which equals the largest seed label because labeling starts at 1.</p>
<p><b> Declaration:</b></p>
<p>use arbitrary-dimensional arrays: </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> N, <span class="keyword">class </span>T, <span class="keyword">class </span>S1,</div>
<div class="line">                              <span class="keyword">class </span>Label, <span class="keyword">class </span>S2&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> </div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#ga704fac970031b32d42d5cc5ea5980751" title="Generate seeds for SLIC superpixel computation in arbitrary dimensions.">generateSlicSeeds</a>(MultiArrayView&lt;N, T, S1&gt; <span class="keyword">const</span> &amp; src,</div>
<div class="line">                      MultiArrayView&lt;N, Label, S2&gt;     seeds,</div>
<div class="line">                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>                     seedDist,</div>
<div class="line">                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>                     searchRadius = 1);</div>
<div class="line">}</div>
</div><!-- fragment --><p><b> Usage:</b></p>
<p><b>#include</b> &lt;<a class="el" href="slic_8hxx_source.html">vigra/slic.hxx</a>&gt;<br/>
 Namespace: vigra</p>
<div class="fragment"><div class="line">MultiArray&lt;2, RGBValue&lt;float&gt; &gt; src(<a class="code" href="group__MultiIteratorGroup.html#ga2e2ffc107bb0e38f9b1288b647c8ec5b" title="shape type for MultiArray&lt;2, T&gt;">Shape2</a>(w, h));</div>
<div class="line">... <span class="comment">// fill src image</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// transform image to Lab color space</span></div>
<div class="line"><a class="code" href="group__TransformAlgo.html#gababa545b60bb7db13076648f83c6b314" title="Apply unary point transformation to each pixel.">transformImage</a>(srcImageRange(src), destImage(src), RGBPrime2LabFunctor&lt;float&gt;());</div>
<div class="line"></div>
<div class="line"><span class="comment">// compute image gradient magnitude at scale 1.0 as a boundary indicator</span></div>
<div class="line">MultiArray&lt;2, float&gt; grad(src.shape());</div>
<div class="line"><a class="code" href="group__CommonConvolutionFilters.html#gab80e356fa487f97d718ed815a3cf4855" title="Calculate the gradient magnitude by means of a 1st derivatives of Gaussian filter.">gaussianGradientMagnitude</a>(srcImageRange(src), destImage(grad), 1.0);</div>
<div class="line"></div>
<div class="line">MultiArray&lt;2, unsigned int&gt;  seeds(src.shape());</div>
<div class="line"><span class="keywordtype">int</span> seedDistance = 15;</div>
<div class="line"></div>
<div class="line"><span class="comment">// place seeds on a grid with distance 15, but then move it to the lowest gradient</span></div>
<div class="line"><span class="comment">// poistion in a 3x3 window</span></div>
<div class="line"><a class="code" href="group__SeededRegionGrowing.html#ga704fac970031b32d42d5cc5ea5980751" title="Generate seeds for SLIC superpixel computation in arbitrary dimensions.">generateSlicSeeds</a>(grad, seeds, seedDistance);</div>
</div><!-- fragment --><p>For more details and examples see <a class="el" href="group__SeededRegionGrowing.html#ga5561f1ce9b3f7a95b7de67738a0d2447" title="Compute SLIC superpixels in arbitrary dimensions.">slicSuperpixels()</a>. </p>

</div>
</div>
<a class="anchor" id="ga5561f1ce9b3f7a95b7de67738a0d2447"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int vigra::slicSuperpixels </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute SLIC superpixels in arbitrary dimensions. </p>
<p>This function implements the algorithm described in</p>
<p>R. Achanta et al.: <em>"SLIC Superpixels Compared to State-of-the-Art 
Superpixel Methods"</em>, IEEE Trans. Patt. Analysis Mach. Intell. 34(11):2274-2281, 2012</p>
<p>The value type <code>T</code> of the source array <em>src</em> must provide the necessary functionality to compute averages and squared distances (i.e. it must fulfill the requirements of a <a class="el" href="AlgebraicConcepts.html#LinearSpace">LinearSpace</a> and support <a class="el" href="group__MathFunctions.html#ga38870065d4c6e12602b9154c7e69df1f" title="The squared norm of a numerical object.">squaredNorm(T const &amp;)</a>). This is true for all scalar types as well as <a class="el" href="classvigra_1_1TinyVector.html">vigra::TinyVector</a> and <a class="el" href="classvigra_1_1RGBValue.html">vigra::RGBValue</a>. The output array <em>labels</em> will be filled with labels designating membership of each point in one of the superpixel regions.</p>
<p>The output array can optionally contain seeds (which will be overwritten by the output) to give you full control over seed placement. If <em>labels</em> is empty, seeds will be created automatically by an internal call to <a class="el" href="group__SeededRegionGrowing.html#ga704fac970031b32d42d5cc5ea5980751" title="Generate seeds for SLIC superpixel computation in arbitrary dimensions.">generateSlicSeeds()</a>.</p>
<p>The parameter <em>seedDistance</em> specifies the radius of the window around each seed (or, more precisely, around the present regions centers) where the algorithm looks for potential members of the corresponding superpixel. It thus places an upper limit on the superpixel size. When seeds are computed automatically, this parameter also determines the grid spacing for seed placement.</p>
<p>The parameter <em>intensityScaling</em> is used to normalize (i.e. divide) the color/intensity difference before it is compared with the spatial distance. This corresponds to parameter <em>m</em> in equation (2) of the paper.</p>
<p>The options object can be used to specify the number of iterations (<code><a class="el" href="structvigra_1_1SlicOptions.html#ad45f768b0db06118a2dd99414d466674" title="Number of iterations.">SlicOptions::iterations()</a></code>) and an explicit minimal superpixel size (<code><a class="el" href="structvigra_1_1SlicOptions.html#aab275dea3ad91d8878c4f442417f10d7" title="Minimum superpixel size.">SlicOptions::minSize()</a></code>). By default, the algorithm merges all regions that are smaller than 1/4 of the average superpixel size.</p>
<p>The function returns the number of superpixels, which equals the largest label because labeling starts at 1.</p>
<p><b> Declaration:</b></p>
<p>use arbitrary-dimensional arrays: </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> N, <span class="keyword">class </span>T, <span class="keyword">class </span>S1,</div>
<div class="line">                              <span class="keyword">class </span>Label, <span class="keyword">class </span>S2,</div>
<div class="line">              <span class="keyword">class </span>DistanceType&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> </div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#ga5561f1ce9b3f7a95b7de67738a0d2447" title="Compute SLIC superpixels in arbitrary dimensions.">slicSuperpixels</a>(MultiArrayView&lt;N, T, S1&gt; <span class="keyword">const</span> &amp;  src,</div>
<div class="line">                    MultiArrayView&lt;N, Label, S2&gt;      labels,</div>
<div class="line">                    DistanceType                      intensityScaling,</div>
<div class="line">                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>                      seedDistance, </div>
<div class="line">                    SlicOptions <span class="keyword">const</span> &amp;               options = SlicOptions());</div>
<div class="line">}</div>
</div><!-- fragment --><p><b> Usage:</b></p>
<p><b>#include</b> &lt;<a class="el" href="slic_8hxx_source.html">vigra/slic.hxx</a>&gt;<br/>
 Namespace: vigra</p>
<div class="fragment"><div class="line">MultiArray&lt;2, RGBValue&lt;float&gt; &gt; src(<a class="code" href="group__MultiIteratorGroup.html#ga2e2ffc107bb0e38f9b1288b647c8ec5b" title="shape type for MultiArray&lt;2, T&gt;">Shape2</a>(w, h));</div>
<div class="line">... <span class="comment">// fill src image</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// transform image to Lab color space</span></div>
<div class="line"><a class="code" href="group__MultiPointoperators.html#ga4e3f906de480f4a867340968da8a98dd" title="Transform a multi-dimensional array with a unary function or functor.">transformMultiArray</a>(srcMultiArrayRange(src), destMultiArray(src), RGBPrime2LabFunctor&lt;float&gt;());    </div>
<div class="line"></div>
<div class="line">MultiArray&lt;2, unsigned int&gt;  labels(src.shape());</div>
<div class="line"><span class="keywordtype">int</span> seedDistance = 15;</div>
<div class="line"><span class="keywordtype">double</span> intensityScaling = 20.0;</div>
<div class="line"></div>
<div class="line"><span class="comment">// compute seeds automatically, perform 40 iterations, and scale intensity differences</span></div>
<div class="line"><span class="comment">// down to 1/20 before comparing with spatial distances</span></div>
<div class="line"><a class="code" href="group__SeededRegionGrowing.html#ga5561f1ce9b3f7a95b7de67738a0d2447" title="Compute SLIC superpixels in arbitrary dimensions.">slicSuperpixels</a>(src, labels, intensityScaling, seedDistance, SlicOptions().iterations(40));</div>
</div><!-- fragment --><p>This works for arbitrary-dimensional arrays. </p>

</div>
</div>
<a class="anchor" id="ga3fdf604e9584a7bdd39e4ee6bd620cbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int vigra::generateWatershedSeeds </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate seeds for watershed computation and seeded region growing. </p>
<p>The source image is a boundary indicator such as the gradient magnitude or the trace of the <a class="el" href="group__TensorImaging.html#gab4ee0f19130a109119cc9cbc594ed1b7">boundaryTensor()</a>. Seeds are generally generated at locations where the boundaryness (i.e. the likelihood of the point being on the boundary) is very small. In particular, seeds can be placed by either looking for local minima (possibly including minimal plateaus) of the boundaryness, of by looking at level sets (i.e. regions where the boundaryness is below a threshold). Both methods can also be combined, so that only minima below a threshold are returned. The particular seeding strategy is specified by the <code>options</code> object (see <a class="el" href="classvigra_1_1SeedOptions.html">SeedOptions</a>).</p>
<p>The pixel type of the input image must be <code>LessThanComparable</code>. The pixel type of the output image must be large enough to hold the labels for all seeds. (typically, you will use <code>UInt32</code>). The function will label seeds by consecutive integers (starting from 1) and returns the largest label it used.</p>
<p>Pass <a class="el" href="group__MultiIteratorGroup.html#ga9d75de3edc093f215c3f4d42a966167a">IndirectNeighborhood</a> or <a class="el" href="group__MultiIteratorGroup.html#ga9d75de3edc093f215c3f4d42a966167a">DirectNeighborhood</a> (first form of the function) or <a class="el" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">vigra::EightNeighborCode</a> or <a class="el" href="group__PixelNeighborhood.html#ga58cb45fb133eb7c1d63fd14f65b8320f">vigra::FourNeighborCode</a> (second and third forms) to determine the neighborhood where pixel values are compared.</p>
<p><b> Declarations:</b></p>
<p>use arbitrary-dimensional arrays: </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> N, <span class="keyword">class </span>T, <span class="keyword">class </span>S1,</div>
<div class="line">                              <span class="keyword">class </span>Label, <span class="keyword">class </span>S2&gt;</div>
<div class="line">    Label</div>
<div class="line">    generateWatershedSeeds(MultiArrayView&lt;N, T, S1&gt; <span class="keyword">const</span> &amp; data,</div>
<div class="line">                           MultiArrayView&lt;N, Label, S2&gt; seeds,</div>
<div class="line">                           <a class="code" href="group__MultiIteratorGroup.html#ga9d75de3edc093f215c3f4d42a966167a" title="Choose the neighborhood system in a dimension-independent way.">NeighborhoodType</a> neighborhood = <a class="code" href="group__MultiIteratorGroup.html#gga9d75de3edc093f215c3f4d42a966167aabee0bb96274e332d294c1aa2893f6cac" title="use direct and indirect neighbors">IndirectNeighborhood</a>,</div>
<div class="line">                           SeedOptions <span class="keyword">const</span> &amp; options = SeedOptions());</div>
<div class="line">}</div>
</div><!-- fragment --><p><a href="#" id="generateWatershedSeeds_OldAPIToggle" onclick="return toggleHiddenDocumentation(&apos;generateWatershedSeeds_OldAPI&apos;, &apos;generateWatershedSeeds_OldAPIToggle&apos;, &apos;deprecated declarations&apos;);">show deprecated declarations</a></p>
<div id="generateWatershedSeeds_OldAPI" style="display:none"> pass <a class="el" href="group__ImageIterators.html">Image Iterators</a> and <a class="el" href="group__DataAccessors.html">Data Accessors</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>Neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">    generateWatershedSeeds(SrcIterator upperlefts, SrcIterator lowerrights, SrcAccessor sa,</div>
<div class="line">                           DestIterator upperleftd, DestAccessor da, </div>
<div class="line">                           Neighborhood neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>(),</div>
<div class="line">                           SeedOptions <span class="keyword">const</span> &amp; options = SeedOptions());</div>
<div class="line">}</div>
</div><!-- fragment --><p> use argument objects in conjunction with <a class="el" href="ArgumentObjectFactories.html">Argument Object Factories</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>Neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">    generateWatershedSeeds(triple&lt;SrcIterator, SrcIterator, SrcAccessor&gt; src,</div>
<div class="line">                           pair&lt;DestIterator, DestAccessor&gt; dest, </div>
<div class="line">                           Neighborhood neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>(),</div>
<div class="line">                           SeedOptions <span class="keyword">const</span> &amp; options = SeedOptions());</div>
<div class="line">}</div>
</div><!-- fragment --> </div><p><b> Usage:</b></p>
<p><b>#include</b> &lt;<a class="el" href="multi__watersheds_8hxx_source.html">vigra/multi_watersheds.hxx</a>&gt; (<a class="el" href="classvigra_1_1MultiArray.html" title="Main MultiArray class containing the memory management.">MultiArray</a> variant)<br/>
 <b>#include</b> &lt;<a class="el" href="watersheds_8hxx_source.html">vigra/watersheds.hxx</a>&gt; (deprecated variants)<br/>
 Namespace: vigra</p>
<p>For detailed examples see <a class="el" href="group__SeededRegionGrowing.html#ga67dae5f2292e59d2de0936e7aa4f3e67">watershedsMultiArray()</a> and <a class="el" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d">watershedsRegionGrowing()</a>. </p>

</div>
</div>
<a class="anchor" id="ga798e1da19d24c46a3762057b1708e8b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int vigra::watershedsUnionFind </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Region segmentation by means of the union-find watershed algorithm. </p>
<p>Note: This function is largely obsolete, <a class="el" href="group__SeededRegionGrowing.html#ga67dae5f2292e59d2de0936e7aa4f3e67">watershedsMultiArray()</a> should be preferred unless top speed is required.</p>
<p>This function implements the union-find version of the watershed algorithms described as algorithm 4.7 in</p>
<p>J. Roerdink, R. Meijster: <em>"The watershed transform: definitions, algorithms,
and parallelization strategies"</em>, Fundamenta Informaticae, 41:187-228, 2000</p>
<p>The source image is a boundary indicator such as the <a class="el" href="group__CommonConvolutionFilters.html#gab80e356fa487f97d718ed815a3cf4855" title="Calculate the gradient magnitude by means of a 1st derivatives of Gaussian filter.">gaussianGradientMagnitude()</a> or the trace of the <a class="el" href="group__TensorImaging.html#gab4ee0f19130a109119cc9cbc594ed1b7">boundaryTensor()</a>. Local minima of the boundary indicator are used as region seeds, and all other pixels are recursively assigned to the same region as their lowest neighbor. Pass <a class="el" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">vigra::EightNeighborCode</a> or <a class="el" href="group__PixelNeighborhood.html#ga58cb45fb133eb7c1d63fd14f65b8320f">vigra::FourNeighborCode</a> to determine the neighborhood where pixel values are compared. The pixel type of the input image must be <code>LessThanComparable</code>. The function uses accessors.</p>
<p>Note that VIGRA provides an alternative implementation of the watershed transform via <a class="el" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d">watershedsRegionGrowing()</a>. It is slower, but offers many more configuration options.</p>
<p><b> Declarations:</b></p>
<p>pass 2D array views: </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>T1, <span class="keyword">class </span>S1,</div>
<div class="line">              <span class="keyword">class </span>T2, <span class="keyword">class </span>S2,</div>
<div class="line">              <span class="keyword">class </span>Neighborhood&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#ga798e1da19d24c46a3762057b1708e8b3" title="Region segmentation by means of the union-find watershed algorithm.">watershedsUnionFind</a>(MultiArrayView&lt;2, T1, S1&gt; <span class="keyword">const</span> &amp; src,</div>
<div class="line">                        MultiArrayView&lt;2, T2, S2&gt; dest, </div>
<div class="line">                        Neighborhood neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>());</div>
<div class="line">}</div>
</div><!-- fragment --><p><a href="#" id="watershedsUnionFind_OldAPIToggle" onclick="return toggleHiddenDocumentation(&apos;watershedsUnionFind_OldAPI&apos;, &apos;watershedsUnionFind_OldAPIToggle&apos;, &apos;deprecated declarations&apos;);">show deprecated declarations</a></p>
<div id="watershedsUnionFind_OldAPI" style="display:none"> pass <a class="el" href="group__ImageIterators.html">Image Iterators</a> and <a class="el" href="group__DataAccessors.html">Data Accessors</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>Neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#ga798e1da19d24c46a3762057b1708e8b3" title="Region segmentation by means of the union-find watershed algorithm.">watershedsUnionFind</a>(SrcIterator upperlefts, SrcIterator lowerrights, SrcAccessor sa,</div>
<div class="line">                        DestIterator upperleftd, DestAccessor da,</div>
<div class="line">                        Neighborhood neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>())</div>
<div class="line">}</div>
</div><!-- fragment --><p> use argument objects in conjunction with <a class="el" href="ArgumentObjectFactories.html">Argument Object Factories</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>Neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#ga798e1da19d24c46a3762057b1708e8b3" title="Region segmentation by means of the union-find watershed algorithm.">watershedsUnionFind</a>(triple&lt;SrcIterator, SrcIterator, SrcAccessor&gt; src,</div>
<div class="line">                        pair&lt;DestIterator, DestAccessor&gt; dest,</div>
<div class="line">                        Neighborhood neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>())</div>
<div class="line">}</div>
</div><!-- fragment --> </div><p><b> Usage:</b></p>
<p><b>#include</b> &lt;<a class="el" href="watersheds_8hxx_source.html">vigra/watersheds.hxx</a>&gt;<br/>
 Namespace: vigra</p>
<p>Example: watersheds of the gradient magnitude.</p>
<div class="fragment"><div class="line">MultiArray&lt;2, float&gt; in(w,h);</div>
<div class="line">... <span class="comment">// read input data</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// compute gradient magnitude as boundary indicator</span></div>
<div class="line">MultiArray&lt;2, float&gt; gradMag(w, h);</div>
<div class="line"><a class="code" href="group__CommonConvolutionFilters.html#gab80e356fa487f97d718ed815a3cf4855" title="Calculate the gradient magnitude by means of a 1st derivatives of Gaussian filter.">gaussianGradientMagnitude</a>(src, gradMag, 3.0);</div>
<div class="line"></div>
<div class="line"><span class="comment">// the pixel type of the destination image must be large enough to hold</span></div>
<div class="line"><span class="comment">// numbers up to &#39;max_region_label&#39; to prevent overflow</span></div>
<div class="line">MultiArray&lt;2, unsigned int&gt; labeling(w,h);</div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_region_label = <a class="code" href="group__SeededRegionGrowing.html#ga798e1da19d24c46a3762057b1708e8b3" title="Region segmentation by means of the union-find watershed algorithm.">watershedsUnionFind</a>(gradMag, labeling);</div>
</div><!-- fragment --><p><a href="#" id="watershedsUnionFind_OldUsageToggle" onclick="return toggleHiddenDocumentation(&apos;watershedsUnionFind_OldUsage&apos;, &apos;watershedsUnionFind_OldUsageToggle&apos;, &apos;deprecated examples&apos;);">show deprecated examples</a></p>
<div id="watershedsUnionFind_OldUsage" style="display:none"> Example: watersheds of the gradient magnitude.</div><div id="watershedsUnionFind_OldUsage" style="display:none"><div class="fragment"><div class="line"><a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::BImage</a> in(w,h);</div>
<div class="line">... <span class="comment">// read input data</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// compute gradient magnitude as boundary indicator</span></div>
<div class="line"><a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::FImage</a> gradMag(w, h);</div>
<div class="line"><a class="code" href="group__CommonConvolutionFilters.html#gab80e356fa487f97d718ed815a3cf4855" title="Calculate the gradient magnitude by means of a 1st derivatives of Gaussian filter.">gaussianGradientMagnitude</a>(srcImageRange(src), destImage(gradMag), 3.0);</div>
<div class="line"></div>
<div class="line"><span class="comment">// the pixel type of the destination image must be large enough to hold</span></div>
<div class="line"><span class="comment">// numbers up to &#39;max_region_label&#39; to prevent overflow</span></div>
<div class="line"><a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::IImage</a> labeling(w,h);</div>
<div class="line"><span class="keywordtype">int</span> max_region_label = <a class="code" href="group__SeededRegionGrowing.html#ga798e1da19d24c46a3762057b1708e8b3" title="Region segmentation by means of the union-find watershed algorithm.">watershedsUnionFind</a>(srcImageRange(gradMag), destImage(labeling));</div>
</div><!-- fragment --><p> <b> Required Interface:</b> </p>
<div class="fragment"><div class="line">SrcIterator src_upperleft, src_lowerright;</div>
<div class="line">DestIterator dest_upperleft;</div>
<div class="line"></div>
<div class="line">SrcAccessor src_accessor;</div>
<div class="line">DestAccessor dest_accessor;</div>
<div class="line"></div>
<div class="line"><span class="comment">// compare src values</span></div>
<div class="line">src_accessor(src_upperleft) &lt;= src_accessor(src_upperleft)</div>
<div class="line"></div>
<div class="line"><span class="comment">// set result</span></div>
<div class="line">int label;</div>
<div class="line">dest_accessor.set(label, dest_upperleft);</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="gadc7ca5f4008adfaeeb33875bd378bc9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int vigra::watershedsRegionGrowing </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Region segmentation by means of a flooding-based watershed algorithm. </p>
<p>Note: This function is largely obsolete, <a class="el" href="group__SeededRegionGrowing.html#ga67dae5f2292e59d2de0936e7aa4f3e67">watershedsMultiArray()</a> should be preferred unless top speed is required.</p>
<p>This function implements variants of the watershed algorithm described in</p>
<p>L. Vincent and P. Soille: <em>"Watersheds in digital spaces: An efficient algorithm
based on immersion simulations"</em>, IEEE Trans. Patt. Analysis Mach. Intell. 13(6):583-598, 1991</p>
<p>The source image is a boundary indicator such as the <a class="el" href="group__CommonConvolutionFilters.html#gab80e356fa487f97d718ed815a3cf4855" title="Calculate the gradient magnitude by means of a 1st derivatives of Gaussian filter.">gaussianGradientMagnitude()</a> or the trace of the <a class="el" href="group__TensorImaging.html#gab4ee0f19130a109119cc9cbc594ed1b7">boundaryTensor()</a>, and the destination is a label image designating membership of each point in one of the regions. Plateaus in the boundary indicator (i.e. regions of constant gray value) are handled via a Euclidean distance transform by default.</p>
<p>By default, the destination image is assumed to hold seeds for a seeded watershed transform. Seeds may, for example, be created by means of generateWatershedSeeds(). Note that the seeds will be overridden with the final watershed segmentation.</p>
<p>Alternatively, you may provide <a class="el" href="classvigra_1_1SeedOptions.html">SeedOptions</a> in order to instruct <a class="el" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing()</a> to generate its own seeds (it will call generateWatershedSeeds() internally). In that case, the destination image should be zero-initialized.</p>
<p>You can specify the neighborhood system to be used by passing <a class="el" href="group__PixelNeighborhood.html#ga58cb45fb133eb7c1d63fd14f65b8320f">FourNeighborCode</a> or <a class="el" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a> (default).</p>
<p>Further options to be specified via <a class="el" href="classvigra_1_1WatershedOptions.html">WatershedOptions</a> are:</p>
<ul>
<li>
Whether to keep a 1-pixel-wide contour (with label 0) between regions or perform complete grow (i.e. all pixels are assigned to a region). </li>
<li>
Whether to stop growing when the boundaryness exceeds a threshold (remaining pixels keep label 0). </li>
<li>
Whether to use a faster, but less powerful algorithm ("turbo algorithm"). It is faster because it orders pixels by means of a <a class="el" href="classvigra_1_1BucketQueue.html">BucketQueue</a> (therefore, the boundary indicator must contain integers in the range <code>[0, ..., bucket_count-1]</code>, where <code>bucket_count</code> is specified in the options object), it only supports complete growing (no contour between regions is possible), and it handles plateaus in a simplistic way. It also saves some memory because it allocates less temporary storage. </li>
<li>
Whether one region (label) is to be preferred or discouraged by biasing its cost with a given factor (smaller than 1 for preference, larger than 1 for discouragement). </li>
</ul>
<p>Note that VIGRA provides an alternative implementation of the watershed transform via <a class="el" href="group__SeededRegionGrowing.html#ga798e1da19d24c46a3762057b1708e8b3">watershedsUnionFind()</a>.</p>
<p><b> Declarations:</b></p>
<p>pass 2D array views: </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>T1, <span class="keyword">class </span>S1,</div>
<div class="line">              <span class="keyword">class </span>T2, <span class="keyword">class </span>S2,</div>
<div class="line">              <span class="keyword">class </span>Neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing</a>(MultiArrayView&lt;2, T1, S1&gt; <span class="keyword">const</span> &amp; src,</div>
<div class="line">                            MultiArrayView&lt;2, T2, S2&gt; dest, </div>
<div class="line">                            Neighborhood neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>(),</div>
<div class="line">                            WatershedOptions <span class="keyword">const</span> &amp; options = WatershedOptions());</div>
<div class="line"></div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>T1, <span class="keyword">class </span>S1,</div>
<div class="line">              <span class="keyword">class </span>T2, <span class="keyword">class </span>S2&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing</a>(MultiArrayView&lt;2, T1, S1&gt; <span class="keyword">const</span> &amp; src,</div>
<div class="line">                            MultiArrayView&lt;2, T2, S2&gt; dest, </div>
<div class="line">                            WatershedOptions <span class="keyword">const</span> &amp; options = WatershedOptions());</div>
<div class="line">}</div>
</div><!-- fragment --><p><a href="#" id="watershedsRegionGrowing_OldAPIToggle" onclick="return toggleHiddenDocumentation(&apos;watershedsRegionGrowing_OldAPI&apos;, &apos;watershedsRegionGrowing_OldAPIToggle&apos;, &apos;deprecated declarations&apos;);">show deprecated declarations</a></p>
<div id="watershedsRegionGrowing_OldAPI" style="display:none"> pass <a class="el" href="group__ImageIterators.html">Image Iterators</a> and <a class="el" href="group__DataAccessors.html">Data Accessors</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>Neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing</a>(SrcIterator upperlefts, SrcIterator lowerrights, SrcAccessor sa,</div>
<div class="line">                            DestIterator upperleftd, DestAccessor da, </div>
<div class="line">                            Neighborhood neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>(),</div>
<div class="line">                            WatershedOptions <span class="keyword">const</span> &amp; options = WatershedOptions());</div>
<div class="line"></div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing</a>(SrcIterator upperlefts, SrcIterator lowerrights, SrcAccessor sa,</div>
<div class="line">                            DestIterator upperleftd, DestAccessor da, </div>
<div class="line">                            WatershedOptions <span class="keyword">const</span> &amp; options = WatershedOptions());</div>
<div class="line">}</div>
</div><!-- fragment --><p> use argument objects in conjunction with <a class="el" href="ArgumentObjectFactories.html">Argument Object Factories</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>Neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing</a>(triple&lt;SrcIterator, SrcIterator, SrcAccessor&gt; src,</div>
<div class="line">                            pair&lt;DestIterator, DestAccessor&gt; dest, </div>
<div class="line">                            Neighborhood neighborhood = <a class="code" href="group__PixelNeighborhood.html#ga04897760f5b7969c9811a3c258f5981d">EightNeighborCode</a>(),</div>
<div class="line">                            WatershedOptions <span class="keyword">const</span> &amp; options = WatershedOptions());</div>
<div class="line">                            </div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing</a>(triple&lt;SrcIterator, SrcIterator, SrcAccessor&gt; src,</div>
<div class="line">                            pair&lt;DestIterator, DestAccessor&gt; dest, </div>
<div class="line">                            WatershedOptions <span class="keyword">const</span> &amp; options = WatershedOptions());</div>
<div class="line">}</div>
</div><!-- fragment --> </div><p><b> Usage:</b></p>
<p><b>#include</b> &lt;<a class="el" href="watersheds_8hxx_source.html">vigra/watersheds.hxx</a>&gt;<br/>
 Namespace: vigra</p>
<p>Example: watersheds of the gradient magnitude.</p>
<div class="fragment"><div class="line">MultiArray&lt;2, float&gt; src(w, h);</div>
<div class="line">... <span class="comment">// read input data</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// compute gradient magnitude at scale 1.0 as a boundary indicator</span></div>
<div class="line">MultiArray&lt;2, float&gt; gradMag(w, h);</div>
<div class="line"><a class="code" href="group__CommonConvolutionFilters.html#gab80e356fa487f97d718ed815a3cf4855" title="Calculate the gradient magnitude by means of a 1st derivatives of Gaussian filter.">gaussianGradientMagnitude</a>(src, gradMag, 1.0);</div>
<div class="line"></div>
<div class="line"><span class="comment">// example 1</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// the pixel type of the destination image must be large enough to hold</span></div>
<div class="line">    <span class="comment">// numbers up to &#39;max_region_label&#39; to prevent overflow</span></div>
<div class="line">    MultiArray&lt;2, unsigned int&gt; labeling(w, h);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// call watershed algorithm for 4-neighborhood, leave a 1-pixel boundary between regions,</span></div>
<div class="line">    <span class="comment">// and autogenerate seeds from all gradient minima where the magnitude is below 2.0</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_region_label = </div>
<div class="line">          <a class="code" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing</a>(gradMag, labeling,</div>
<div class="line">                                  <a class="code" href="group__PixelNeighborhood.html#ga58cb45fb133eb7c1d63fd14f65b8320f">FourNeighborCode</a>(),</div>
<div class="line">                                  WatershedOptions().keepContours()</div>
<div class="line">                                       .seedOptions(SeedOptions().minima().threshold(2.0)));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// example 2</span></div>
<div class="line">{</div>
<div class="line">    MultiArray&lt;2, unsigned int&gt; labeling(w, h);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// compute seeds beforehand (use connected components of all pixels </span></div>
<div class="line">    <span class="comment">// where the gradient  is below 4.0)</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_region_label = </div>
<div class="line">          generateWatershedSeeds(gradMag, labeling,</div>
<div class="line">                                 SeedOptions().levelSets(4.0));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// quantize the gradient image to 256 gray levels</span></div>
<div class="line">    MultiArray&lt;2, unsigned char&gt; gradMag256(w, h);</div>
<div class="line">    FindMinMax&lt;float&gt; minmax; </div>
<div class="line">    <a class="code" href="group__InspectAlgo.html#gaa055bcaf71c209fdeb006fe3e44b0452" title="Apply read-only functor to every pixel in the image.">inspectImage</a>(gradMag, minmax); <span class="comment">// find original range</span></div>
<div class="line">    <a class="code" href="group__TransformAlgo.html#gababa545b60bb7db13076648f83c6b314" title="Apply unary point transformation to each pixel.">transformImage</a>(gradMag, gradMag256,</div>
<div class="line">                   <a class="code" href="group__TransformFunctor.html#ga500478e445d819abfc4dc9a748dcba5d" title="Map a source intensity range linearly to a destination range.">linearRangeMapping</a>(minmax, 0, 255));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// call the turbo algorithm with 256 bins, using 8-neighborhood</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing</a>(gradMag256, labeling,</div>
<div class="line">                            WatershedOptions().turboAlgorithm(256));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// example 3</span></div>
<div class="line">{</div>
<div class="line">   MultiArray&lt;2, unsigned int&gt; labeling(w, h);</div>
<div class="line">    </div>
<div class="line">    .. <span class="comment">// get seeds from somewhere, e.g. an interactive labeling program,</span></div>
<div class="line">       <span class="comment">// make sure that label 1 corresponds to the background</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// bias the watershed algorithm so that the background is preferred</span></div>
<div class="line">    <span class="comment">// by reducing the cost for label 1 to 90%</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing</a>(gradMag, labeling,</div>
<div class="line">                            WatershedOptions().biasLabel(1, 0.9));</div>
<div class="line">}</div>
</div><!-- fragment --><p><a href="#" id="watershedsRegionGrowing_OldUsageToggle" onclick="return toggleHiddenDocumentation(&apos;watershedsRegionGrowing_OldUsage&apos;, &apos;watershedsRegionGrowing_OldUsageToggle&apos;, &apos;deprecated examples&apos;);">show deprecated examples</a></p>
<div id="watershedsRegionGrowing_OldUsage" style="display:none"> <div class="fragment"><div class="line"><a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::BImage</a> src(w, h);</div>
<div class="line">... <span class="comment">// read input data</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// compute gradient magnitude at scale 1.0 as a boundary indicator</span></div>
<div class="line"><a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::FImage</a> gradMag(w, h);</div>
<div class="line"><a class="code" href="group__CommonConvolutionFilters.html#gab80e356fa487f97d718ed815a3cf4855" title="Calculate the gradient magnitude by means of a 1st derivatives of Gaussian filter.">gaussianGradientMagnitude</a>(srcImageRange(src), destImage(gradMag), 1.0);</div>
<div class="line"></div>
<div class="line"><span class="comment">// example 1</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// the pixel type of the destination image must be large enough to hold</span></div>
<div class="line">    <span class="comment">// numbers up to &#39;max_region_label&#39; to prevent overflow</span></div>
<div class="line">    <a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::IImage</a> labeling(w, h);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// call watershed algorithm for 4-neighborhood, leave a 1-pixel boundary between regions,</span></div>
<div class="line">    <span class="comment">// and autogenerate seeds from all gradient minima where the magnitude is below 2.0</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_region_label = </div>
<div class="line">          <a class="code" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing</a>(srcImageRange(gradMag), destImage(labeling),</div>
<div class="line">                                  <a class="code" href="group__PixelNeighborhood.html#ga58cb45fb133eb7c1d63fd14f65b8320f">FourNeighborCode</a>(),</div>
<div class="line">                                  WatershedOptions().keepContours()</div>
<div class="line">                                       .seedOptions(SeedOptions().minima().threshold(2.0)));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// example 2</span></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::IImage</a> labeling(w, h);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// compute seeds beforehand (use connected components of all pixels </span></div>
<div class="line">    <span class="comment">// where the gradient  is below 4.0)</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_region_label = </div>
<div class="line">          generateWatershedSeeds(srcImageRange(gradMag), destImage(labeling),</div>
<div class="line">                                 SeedOptions().levelSets(4.0));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// quantize the gradient image to 256 gray levels</span></div>
<div class="line">    <a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::BImage</a> gradMag256(w, h);</div>
<div class="line">    <a class="code" href="classvigra_1_1FindMinMax.html" title="Find the minimum and maximum pixel value in an image or ROI.">vigra::FindMinMax&lt;float&gt;</a> minmax; </div>
<div class="line">    <a class="code" href="group__InspectAlgo.html#gaa055bcaf71c209fdeb006fe3e44b0452" title="Apply read-only functor to every pixel in the image.">inspectImage</a>(srcImageRange(gradMag), minmax); <span class="comment">// find original range</span></div>
<div class="line">    <a class="code" href="group__TransformAlgo.html#gababa545b60bb7db13076648f83c6b314" title="Apply unary point transformation to each pixel.">transformImage</a>(srcImageRange(gradMag), destImage(gradMag256),</div>
<div class="line">                   <a class="code" href="group__TransformFunctor.html#ga500478e445d819abfc4dc9a748dcba5d" title="Map a source intensity range linearly to a destination range.">linearRangeMapping</a>(minmax, 0, 255));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// call the turbo algorithm with 256 bins, using 8-neighborhood</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing</a>(srcImageRange(gradMag256), destImage(labeling),</div>
<div class="line">                            WatershedOptions().turboAlgorithm(256));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// example 3</span></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="classvigra_1_1BasicImage.html" title="Fundamental class template for images.">vigra::IImage</a> labeling(w, h);</div>
<div class="line">    </div>
<div class="line">    .. <span class="comment">// get seeds from somewhere, e.g. an interactive labeling program,</span></div>
<div class="line">       <span class="comment">// make sure that label 1 corresponds to the background</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// bias the watershed algorithm so that the background is preferred</span></div>
<div class="line">    <span class="comment">// by reducing the cost for label 1 to 90%</span></div>
<div class="line">    <a class="code" href="group__SeededRegionGrowing.html#gadc7ca5f4008adfaeeb33875bd378bc9d" title="Region segmentation by means of a flooding-based watershed algorithm.">watershedsRegionGrowing</a>(srcImageRange(gradMag), destImage(labeling),</div>
<div class="line">                            WatershedOptions().biasLabel(1, 0.9));</div>
<div class="line">}</div>
</div><!-- fragment --><p> <b> Required Interface:</b> </p>
<div class="fragment"><div class="line">SrcIterator src_upperleft, src_lowerright;</div>
<div class="line">DestIterator dest_upperleft;</div>
<div class="line"></div>
<div class="line">SrcAccessor src_accessor;</div>
<div class="line">DestAccessor dest_accessor;</div>
<div class="line"></div>
<div class="line"><span class="comment">// compare src values</span></div>
<div class="line">src_accessor(src_upperleft) &lt;= src_accessor(src_upperleft)</div>
<div class="line"></div>
<div class="line"><span class="comment">// set result</span></div>
<div class="line">int label;</div>
<div class="line">dest_accessor.set(label, dest_upperleft);</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ga848b9a3983f20e8ad753d104aad16810"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int vigra::watersheds3D </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Region Segmentation by means of the watershed algorithm. </p>
<p>This function is deprecated, use <a class="el" href="group__SeededRegionGrowing.html#ga67dae5f2292e59d2de0936e7aa4f3e67">watershedsMultiArray()</a> instead.</p>
<p><b> Declarations:</b></p>
<p><a href="#" id="watersheds3D_OldAPIToggle" onclick="return toggleHiddenDocumentation(&apos;watersheds3D_OldAPI&apos;, &apos;watersheds3D_OldAPIToggle&apos;, &apos;deprecated declarations&apos;);">show deprecated declarations</a></p>
<div id="watersheds3D_OldAPI" style="display:none"> pass <a class="el" href="MultiIteratorPage.html">MultiIterators</a> and <a class="el" href="group__DataAccessors.html">Data Accessors</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,<span class="keyword">class </span>SrcShape,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>Neighborhood3D&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__SeededRegionGrowing.html#ga848b9a3983f20e8ad753d104aad16810" title="Region Segmentation by means of the watershed algorithm.">watersheds3D</a>(SrcIterator s_Iter, SrcShape srcShape, SrcAccessor sa,</div>
<div class="line">                              DestIterator d_Iter, DestAccessor da,</div>
<div class="line">                              Neighborhood3D neighborhood3D);</div>
<div class="line">}</div>
</div><!-- fragment --><p> use argument objects in conjunction with <a class="el" href="ArgumentObjectFactories.html">Argument Object Factories</a> : </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {</div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,<span class="keyword">class </span>SrcShape,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor,</div>
<div class="line">              <span class="keyword">class </span>Neighborhood3D&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__SeededRegionGrowing.html#ga848b9a3983f20e8ad753d104aad16810" title="Region Segmentation by means of the watershed algorithm.">watersheds3D</a>(triple&lt;SrcIterator, SrcShape, SrcAccessor&gt; src,</div>
<div class="line">                              pair&lt;DestIterator, DestAccessor&gt; dest,</div>
<div class="line">                              Neighborhood3D neighborhood3D);</div>
<div class="line">}</div>
</div><!-- fragment --></div><div id="watersheds3D_OldAPI" style="display:none">use with 3D-Six-Neighborhood: </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {    </div>
<div class="line"></div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,<span class="keyword">class </span>SrcShape,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> watersheds3DSix(triple&lt;SrcIterator, SrcShape, SrcAccessor&gt; src,</div>
<div class="line">                                 pair&lt;DestIterator, DestAccessor&gt; dest);</div>
<div class="line">                                </div>
<div class="line">}</div>
</div><!-- fragment --></div><div id="watersheds3D_OldAPI" style="display:none">use with 3D-TwentySix-Neighborhood: </p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>vigra {    </div>
<div class="line"></div>
<div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class </span>SrcIterator, <span class="keyword">class </span>SrcAccessor,<span class="keyword">class </span>SrcShape,</div>
<div class="line">              <span class="keyword">class </span>DestIterator, <span class="keyword">class </span>DestAccessor&gt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> watersheds3DTwentySix(triple&lt;SrcIterator, SrcShape, SrcAccessor&gt; src,</div>
<div class="line">                                       pair&lt;DestIterator, DestAccessor&gt; dest);</div>
<div class="line">                                </div>
<div class="line">}</div>
</div><!-- fragment --> </div><p>This function implements the union-find version of the watershed algorithms as described in</p>
<p>J. Roerdink, R. Meijster: <em>"The watershed transform: definitions, algorithms,
and parallelization strategies"</em>, Fundamenta Informaticae, 41:187-228, 2000</p>
<p>The source volume is a boundary indicator such as the gradient magnitude of the trace of the <a class="el" href="group__TensorImaging.html#gab4ee0f19130a109119cc9cbc594ed1b7">boundaryTensor()</a>. Local minima of the boundary indicator are used as region seeds, and all other voxels are recursively assigned to the same region as their lowest neighbor. Pass <a class="el" href="group__VoxelNeighborhood.html#gaae23891fb489f969e6deff00b8d76b8a">vigra::NeighborCode3DSix</a> or <a class="el" href="group__VoxelNeighborhood.html#ga89b6c2a18b23d145b3bc2fe983803f08">vigra::NeighborCode3DTwentySix</a> to determine the neighborhood where voxel values are compared. The voxel type of the input volume must be <code>LessThanComparable</code>.</p>
<p><b> Usage:</b></p>
<p><b>#include</b> &lt;vigra/watersheds3D.hxx&gt;<br/>
 Namespace: vigra</p>
<p>Example: watersheds3D of the gradient magnitude.</p>
<div class="fragment"><div class="line"><a class="code" href="group__MultiIteratorGroup.html#gac70cfe6730d928789a2b3ce1f37ae379" title="shape type for MultiArray&lt;3, T&gt;">Shape3</a> shape(w, h, d);</div>
<div class="line"></div>
<div class="line">MultiArray&lt;3, float&gt; src(shape), grad(shape);</div>
<div class="line">...</div>
<div class="line"></div>
<div class="line">double scale = 1;</div>
<div class="line"><a class="code" href="group__CommonConvolutionFilters.html#gab80e356fa487f97d718ed815a3cf4855" title="Calculate the gradient magnitude by means of a 1st derivatives of Gaussian filter.">gaussianGradientMagnitude</a>(src, grad, scale);</div>
<div class="line"></div>
<div class="line">MultiArray&lt;3, int&gt; labels(shape);</div>
<div class="line"></div>
<div class="line"><span class="comment">// find 6-connected regions</span></div>
<div class="line"><span class="keywordtype">int</span> max_region_label = watersheds3DSix(grad, labels);</div>
<div class="line"></div>
<div class="line"><span class="comment">// find 26-connected regions</span></div>
<div class="line">max_region_label = watersheds3DTwentySix(grad, labels);</div>
</div><!-- fragment --><p><a href="#" id="watersheds3D_OldUsageToggle" onclick="return toggleHiddenDocumentation(&apos;watersheds3D_OldUsage&apos;, &apos;watersheds3D_OldUsageToggle&apos;, &apos;deprecated examples&apos;);">show deprecated examples</a></p>
<div id="watersheds3D_OldUsage" style="display:none"> <div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="classvigra_1_1MultiArray.html" title="Main MultiArray class containing the memory management.">vigra::MultiArray&lt;3,int&gt;</a> IntVolume;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="classvigra_1_1MultiArray.html" title="Main MultiArray class containing the memory management.">vigra::MultiArray&lt;3,double&gt;</a> DVolume;</div>
<div class="line">DVolume src(DVolume::difference_type(w,h,d));</div>
<div class="line">IntVolume dest(IntVolume::difference_type(w,h,d));</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">float</span> gauss=1;</div>
<div class="line"></div>
<div class="line"><a class="code" href="classvigra_1_1MultiArray.html" title="Main MultiArray class containing the memory management.">vigra::MultiArray&lt;3, vigra::TinyVector&lt;float,3&gt;</a> &gt; temp(IntVolume::difference_type(w,h,d));</div>
<div class="line"><a class="code" href="group__MultiArrayConvolutionFilters.html#ga4d5e9021732f13248ca3a0fe1b7c0552" title="Calculate Gaussian gradient of a multi-dimensional arrays.">vigra::gaussianGradientMultiArray</a>(srcMultiArrayRange(vol),destMultiArray(temp),gauss);</div>
<div class="line"></div>
<div class="line">IntVolume::iterator temp_iter=temp.begin();</div>
<div class="line"><span class="keywordflow">for</span>(DVolume::iterator iter=src.begin(); iter!=src.end(); ++iter, ++temp_iter)</div>
<div class="line">    *iter = <a class="code" href="group__FFTWComplexOperators.html#ga396baa79e8bd78a178597d32d5152041" title="norm (= magnitude)">norm</a>(*temp_iter);</div>
<div class="line"></div>
<div class="line"><span class="comment">// find 6-connected regions</span></div>
<div class="line"><span class="keywordtype">int</span> max_region_label = vigra::watersheds3DSix(srcMultiArrayRange(src), destMultiArray(dest));</div>
<div class="line"></div>
<div class="line"><span class="comment">// find 26-connected regions</span></div>
<div class="line">max_region_label = vigra::watersheds3DTwentySix(srcMultiArrayRange(src), destMultiArray(dest));</div>
</div><!-- fragment --><p> <b> Required Interface:</b> </p>
<div class="fragment"><div class="line">SrcIterator src_begin;</div>
<div class="line">SrcShape src_shape;</div>
<div class="line">DestIterator dest_begin;</div>
<div class="line"></div>
<div class="line">SrcAccessor src_accessor;</div>
<div class="line">DestAccessor dest_accessor;</div>
<div class="line"></div>
<div class="line"><span class="comment">// compare src values</span></div>
<div class="line">src_accessor(src_begin) &lt;= src_accessor(src_begin)</div>
<div class="line"></div>
<div class="line"><span class="comment">// set result</span></div>
<div class="line">int label;</div>
<div class="line">dest_accessor.set(label, dest_begin);</div>
</div><!-- fragment --> </div> 
</div>
</div>
</div><!-- contents -->
<!-- footer.html -->
<p>
<table border=0 cellspacing=0 width="100%"  bgcolor="#e0d0a0" cellpadding=5>
<tr>
<td>
<p>
<i>&copy; <A HREF="http://hci.iwr.uni-heidelberg.de/people/ukoethe/">Ullrich K&ouml;the</A>     (<A
HREF="mailto:ullrich.koethe@iwr.uni-heidelberg.de">ullrich.koethe@iwr.uni-heidelberg.de</A>)</i> <br>
<i><A HREF="http://hci.iwr.uni-heidelberg.de/">
Heidelberg Collaboratory for Image Processing</a>,
University of Heidelberg, Germany</i>
<td>
<p align=right>
<I>html generated using <A HREF="http://www.doxygen.org">doxygen</A> and <A HREF="http://www.python.org">Python</A></I>
<br>
<i>
vigra 1.10.0 (Mon Nov 18 2013)
</i>
</tr>
</table>
</BODY>
</HTML>
